# 商品管理数据示例

基于现有小程序商品展示结构的深入分析，以下是完整的商品添加接口使用示例。

## 1. 基础商品信息添加

### 示例：极简吸顶灯

```javascript
// 调用 admin_product_add 云函数
wx.cloud.callFunction({
  name: 'admin_product_add',
  data: {
    name: '极简吸顶灯 超薄设计',
    description: '采用高品质LED芯片，高亮度低能耗，适合现代家居装修。超薄设计，安装简便，多种尺寸和色温可选。',
    categoryId: 'category_light_ceiling', // 吸顶灯分类ID
    basePrice: 399,
    originalPrice: 499,

    images: [
      'cloud://your-env-id/ceiling-light-1.jpg',
      'cloud://your-env-id/ceiling-light-2.jpg',
      'cloud://your-env-id/ceiling-light-3.jpg'
    ],

    // SKU规格配置
    skuConfig: {
      variantGroups: [
        {
          key: 'size',
          name: '尺寸',
          options: ['40cm', '50cm', '60cm', '70cm'],
          required: true,
          priceMap: {
            '40cm': 399,
            '50cm': 499,
            '60cm': 599,
            '70cm': 699
          }
        },
        {
          key: 'cct',
          name: '色温',
          options: ['2700K', '3000K', '4000K', '5000K'],
          required: true,
          priceDelta: {} // 色温不额外收费
        },
        {
          key: 'dimming',
          name: '调光方式',
          options: ['无', '三段调光', '无极调光', '蓝牙Mesh'],
          priceDelta: {
            '无': 0,
            '三段调光': 50,
            '无极调光': 100,
            '蓝牙Mesh': 150
          }
        },
        {
          key: 'color',
          name: '边框颜色',
          options: ['白色', '黑色', '灰色', '香槟金'],
          priceDelta: {
            '白色': 0,
            '黑色': 50,
            '灰色': 30,
            '香槟金': 80
          }
        }
      ],

      // 基础规格参数
      baseParams: [
        { key: '显色指数', value: 'Ra ≥ 90', unit: '', important: true },
        { key: '输入电压', value: 'AC220V', unit: 'V', important: true },
        { key: '频率范围', value: '50-60Hz', unit: 'Hz', important: false },
        { key: '功率因数', value: '≥0.9', unit: '', important: false },
        { key: '寿命', value: '≥30000', unit: '小时', important: true },
        { key: '材质', value: '铝合金+PMMA', unit: '', important: true },
        { key: '防护等级', value: 'IP20', unit: '', important: false },
        { key: '质保', value: '3', unit: '年', important: true }
      ],

      // 价格规则
      priceRules: {
        basePrice: 399,
        variantPriceAdjustments: {
          size: { '50cm': 100, '60cm': 200, '70cm': 300 },
          dimming: { '三段调光': 50, '无极调光': 100, '蓝牙Mesh': 150 },
          color: { '黑色': 50, '灰色': 30, '香槟金': 80 }
        },
        minPrice: 399,
        maxPrice: 849
      }
    },

    // 商品规格（用于展示）
    specifications: [
      { key: '尺寸规格', value: '40cm/50cm/60cm/70cm可选', unit: '', important: true },
      { key: '色温选择', value: '2700K/3000K/4000K/5000K', unit: '', important: true },
      { key: '调光功能', value: '无/三段调光/无极调光/蓝牙Mesh', unit: '', important: true },
      { key: '材质工艺', value: '航空级铝合金+高透光PMMA', unit: '', important: true },
      { key: '适用面积', value: '10-30', unit: '平方米', important: false }
    ],

    stock: 500,

    // 商品标签
    tags: ['现代简约', '超薄设计', '高显色', '智能家居', '现代家居'],

    // SEO信息
    seo: {
      title: '极简吸顶灯 超薄设计 高显色LED灯具',
      keywords: '吸顶灯,LED灯具,现代简约,智能家居,照明设计',
      description: '极简设计超薄吸顶灯，采用高品质LED芯片，高显色指数Ra≥90，多种尺寸色温可选，支持智能调光，适合现代家居装修。'
    }
  }
})
```

## 2. 复杂规格商品示例

### 示例：智能组合灯具

```javascript
wx.cloud.callFunction({
  name: 'admin_product_add',
  data: {
    name: '观月组合灯具 智能照明系统',
    description: '专业照明设计组合，包含主灯+辅灯，支持独立控制，营造层次感照明效果。适用于客厅、餐厅、卧室等空间。',
    categoryId: 'category_light_combination',
    basePrice: 1820,
    originalPrice: 2280,

    images: [
      'cloud://your-env-id/combo-light-1.jpg',
      'cloud://your-env-id/combo-light-2.jpg',
      'cloud://your-env-id/combo-light-3.jpg',
      'cloud://your-env-id/combo-light-4.jpg'
    ],

    skuConfig: {
      variantGroups: [
        {
          key: 'combo_type',
          name: '组合类型',
          options: ['5+6组合', '3+3组合', '4+5组合'],
          priceMap: {
            '5+6组合': 1820,
            '3+3组合': 1580,
            '4+5组合': 1690
          }
        },
        {
          key: 'control_type',
          name: '控制方式',
          options: ['墙壁开关', '遥控器', 'APP控制', '语音控制'],
          priceDelta: {
            '墙壁开关': 0,
            '遥控器': 120,
            'APP控制': 200,
            '语音控制': 280
          }
        },
        {
          key: 'installation_type',
          name: '安装方式',
          options: ['明装', '暗装', '吊装'],
          priceDelta: {
            '明装': 0,
            '暗装': 80,
            '吊装': 120
          }
        }
      ],

      baseParams: [
        { key: '总功率', value: '120-180', unit: 'W', important: true },
        { key: '主灯功率', value: '80-120', unit: 'W', important: true },
        { key: '辅灯功率', value: '40-60', unit: 'W', important: true },
        { key: '显色指数', value: 'Ra ≥ 95', unit: '', important: true },
        { key: '色温范围', value: '2700K-5000K', unit: 'K', important: true },
        { key: '调光范围', value: '10%-100%', unit: '', important: true },
        { key: '通信协议', value: 'Wi-Fi+蓝牙', unit: '', important: false },
        { key: '兼容平台', value: '米家/天猫精灵/小爱同学', unit: '', important: false },
        { key: '适用面积', value: '20-50', unit: '平方米', important: true }
      ]
    },

    specifications: [
      { key: '产品规格', value: '多规格组合可选', unit: '', important: true },
      { key: '智能控制', value: '支持手机APP/语音/遥控', unit: '', important: true },
      { key: '场景模式', value: '阅读/休闲/聚会/睡眠', unit: '', important: true },
      { key: '定时功能', value: '支持', unit: '', important: false },
      { key: '记忆功能', value: '支持亮度色温记忆', unit: '', important: false }
    ],

    stock: 200,

    tags: ['智能照明', '组合灯具', '场景模式', '语音控制', '专业设计'],

    seo: {
      title: '观月组合灯具 智能照明系统 专业照明设计',
      keywords: '组合灯具,智能照明,场景模式,语音控制,照明设计',
      description: '专业照明设计的观月组合灯具，支持智能控制，多种场景模式，营造层次感照明效果。'
    }
  }
})
```

## 3. 简单商品示例

### 示例：LED灯泡

```javascript
wx.cloud.callFunction({
  name: 'admin_product_add',
  data: {
    name: 'LED智能灯泡 E27螺口',
    description: '高品质LED智能灯泡，支持手机控制，多种色温亮度可调，兼容各种智能音箱。',
    categoryId: 'category_light_bulb',
    basePrice: 89,
    originalPrice: 119,

    images: [
      'cloud://your-env-id/led-bulb-1.jpg',
      'cloud://your-env-id/led-bulb-2.jpg'
    ],

    skuConfig: {
      variantGroups: [
        {
          key: 'power',
          name: '功率',
          options: ['6W', '8W', '10W', '12W'],
          priceMap: {
            '6W': 89,
            '8W': 99,
            '10W': 109,
            '12W': 119
          }
        },
        {
          key: 'socket_type',
          name: '灯头类型',
          options: ['E27', 'E14', 'B22'],
          priceDelta: {} // 不同灯头不额外收费
        },
        {
          key: 'smart_feature',
          name: '智能功能',
          options: ['基础款', '智能款', 'RGB款'],
          priceDelta: {
            '基础款': 0,
            '智能款': 30,
            'RGB款': 50
          }
        }
      ],

      baseParams: [
        { key: '显色指数', value: 'Ra ≥ 80', unit: '', important: true },
        { key: '色温范围', value: '2700K-6500K', unit: 'K', important: true },
        { key: '使用寿命', value: '≥15000', unit: '小时', important: true },
        { key: '输入电压', value: 'AC220V', unit: 'V', important: true },
        { key: '频闪', value: '无', unit: '', important: true }
      ]
    },

    specifications: [
      { key: '功率规格', value: '6W/8W/10W/12W可选', unit: 'W', important: true },
      { key: '灯头类型', value: 'E27/E14/B22可选', unit: '', important: true },
      { key: '亮度范围', value: '600-1200', unit: 'lm', important: true },
      { key: '节能效果', value: '比传统灯泡节能80%', unit: '', important: false }
    ],

    stock: 1000,

    tags: ['LED灯泡', '智能控制', '节能环保', '高显色'],

    seo: {
      title: 'LED智能灯泡 节能环保 高显色',
      keywords: 'LED灯泡,智能控制,节能环保,高显色',
      description: '高品质LED智能灯泡，支持手机控制，多种色温亮度可调，节能环保。'
    }
  }
})
```

## 4. 商品更新操作示例

### 更新商品状态

```javascript
// 商品上架
wx.cloud.callFunction({
  name: 'admin_product_update',
  data: {
    productId: 'P20241204ABC123',
    action: 'status',
    updateData: {
      status: 'active'
    }
  }
})

// 商品下架
wx.cloud.callFunction({
  name: 'admin_product_update',
  data: {
    productId: 'P20241204ABC123',
    action: 'status',
    updateData: {
      status: 'inactive'
    }
  })
})
```

### 更新库存

```javascript
// 设置库存
wx.cloud.callFunction({
  name: 'admin_product_update',
  data: {
    productId: 'P20241204ABC123',
    action: 'stock',
    updateData: {
      stock: 500,
      operation: 'set'
    }
  }
})

// 增加库存
wx.cloud.callFunction({
  name: 'admin_product_update',
  data: {
    productId: 'P20241204ABC123',
    action: 'stock',
    updateData: {
      stock: 100,
      operation: 'add'
    }
  }
})

// 减少库存
wx.cloud.callFunction({
  name: 'admin_product_update',
  data: {
    productId: 'P20241204ABC123',
    action: 'stock',
    updateData: {
      stock: 50,
      operation: 'subtract'
    }
  }
})
```

### 更新商品信息

```javascript
wx.cloud.callFunction({
  name: 'admin_product_update',
  data: {
    productId: 'P20241204ABC123',
    action: 'update',
    updateData: {
      name: '更新后的商品名称',
      description: '更新后的商品描述',
      basePrice: 429,
      originalPrice: 529,
      images: [
        'cloud://your-env-id/new-image-1.jpg',
        'cloud://your-env-id/new-image-2.jpg'
      ],
      stock: 800,
      tags: ['新标签1', '新标签2'],
      seo: {
        title: '更新后的SEO标题',
        keywords: '新的关键词',
        description: '更新后的SEO描述'
      }
    }
  }
})
```

### 删除商品

```javascript
wx.cloud.callFunction({
  name: 'admin_product_update',
  data: {
    productId: 'P20241204ABC123',
    action: 'delete'
  }
})
```

## 5. 数据结构说明

### 商品ID格式
- 格式：`P{时间戳}{6位随机字符}`
- 示例：`P20241204123456ABC123`

### SKU配置结构
```javascript
{
  variantGroups: [
    {
      key: '规格键名',           // 英文，用于系统识别
      name: '规格显示名称',       // 中文，用于前端显示
      options: ['选项1', '选项2'], // 规格选项数组
      required: true,             // 是否必选
      priceMap: {                // 固定价格映射
        '选项1': 399,
        '选项2': 499
      },
      priceDelta: {              // 价格增量
        '选项1': 0,
        '选项2': 100
      }
    }
  ],
  baseParams: [
    {
      key: '参数名',
      value: '参数值',
      unit: '单位',
      important: false          // 是否重要参数
    }
  ]
}
```

### 权限要求
- 调用这些接口的用户必须具有管理员权限（roles: 0）
- 系统会自动验证用户权限，非管理员用户无法访问

这些接口完全兼容现有的小程序商品展示结构，可以直接用于后台管理系统的商品管理功能。