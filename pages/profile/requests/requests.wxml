<scroll-view class="page" scroll-y refresher-enabled="{{true}}" refresher-triggered="{{refreshing}}" bindrefresherrefresh="refreshData" bindscrolltolower="loadMore">
  <view class="header">
    <text class="title">æˆ‘çš„éœ€æ±‚</text>
    <text class="subtitle">å…± {{total}} æ¡è®¾è®¡è¯·æ±‚</text>
  </view>

  <!-- åŠ è½½ä¸­ -->
  <view wx:if="{{loading && requests.length === 0}}" class="loading-wrap">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view wx:elif="{{isEmpty}}" class="empty-wrap">
    <image class="empty-icon" src="/images/icons/empty-box.png" mode="aspectFit"></image>
    <text class="empty-text">æš‚æ— è®¾è®¡è¯·æ±‚</text>
    <text class="empty-desc">å‘å¸ƒæ‚¨çš„ç…§æ˜è®¾è®¡éœ€æ±‚ï¼Œè®©ä¸“ä¸šè®¾è®¡å¸ˆä¸ºæ‚¨æœåŠ¡</text>
    <button class="publish-btn" bindtap="onPublish">å‘å¸ƒéœ€æ±‚</button>
  </view>

  <!-- åˆ—è¡¨ -->
  <view wx:else class="list">
    <view wx:for="{{requests}}" wx:key="id" class="card" bindtap="onView" data-id="{{item.id}}">
      <!-- å¤´éƒ¨ï¼šåç§° + çŠ¶æ€ -->
      <view class="card-header">
        <text class="name">{{item.name}}</text>
        <text class="status" style="color: {{item.statusColor}}; background: {{item.statusColor}}20;">{{item.status}}</text>
      </view>
      
      <!-- è®¢å•å· -->
      <view class="order-no" wx:if="{{item.orderNo}}">
        <text class="label">ç¼–å·:</text>
        <text class="value">{{item.orderNo}}</text>
      </view>
      
      <!-- æè¿° -->
      <text class="desc">{{item.desc}}</text>
      
      <!-- é¢ç§¯/é¢„ç®— -->
      <view class="specs" wx:if="{{item.area || item.budget}}">
        <text class="spec-item" wx:if="{{item.area}}">ğŸ“ {{item.area}}</text>
        <text class="spec-item" wx:if="{{item.budget}}">ğŸ’° {{item.budget}}</text>
      </view>
      
      <!-- åº•éƒ¨ï¼šæ—¶é—´ + æ“ä½œ -->
      <view class="card-footer">
        <text class="time">{{item.time}}</text>
        <view class="action-btn">
          <text>æŸ¥çœ‹è¿›åº¦</text>
          <text class="arrow">â€º</text>
        </view>
      </view>
    </view>

    <!-- åŠ è½½æ›´å¤š -->
    <view wx:if="{{loading && requests.length > 0}}" class="loading-more">
      <text>åŠ è½½ä¸­...</text>
    </view>
    <view wx:elif="{{!hasMore && requests.length > 0}}" class="no-more">
      <text>â€” æ²¡æœ‰æ›´å¤šäº† â€”</text>
    </view>
  </view>
</scroll-view>
