<scroll-view class="page" scroll-y>
  <view class="header">
    <text class="title">我的设备</text>
  </view>

  <!-- 设备列表 -->
  <view wx:if="{{devices.length > 0}}" class="device-list">
    <view wx:for="{{devices}}" wx:key="id" class="device-card">
      <view class="device-header">
        <image class="device-icon" src="{{item.icon}}" mode="aspectFit"></image>
        <view class="device-info">
          <text class="device-name">{{item.name}}</text>
          <text class="device-model">{{item.model}}</text>
        </view>
        <view class="device-status">
          <text class="status-dot status-{{item.status}}"></text>
          <text class="status-text">{{item.statusText}}</text>
        </view>
      </view>
      
      <view class="device-details">
        <view class="detail-row">
          <text class="label">设备位置</text>
          <text class="value">{{item.location}}</text>
        </view>
        <view class="detail-row">
          <text class="label">添加时间</text>
          <text class="value">{{item.addedTime}}</text>
        </view>
        <view wx:if="{{item.status === 'online'}}" class="detail-row">
          <text class="label">亮度</text>
          <text class="value">{{item.brightness}}%</text>
        </view>
      </view>

      <view class="device-actions">
        <button wx:if="{{item.status === 'online'}}" class="btn btn-control" bindtap="controlDevice" data-id="{{item.id}}">设备控制</button>
        <button class="btn btn-settings" bindtap="deviceSettings" data-id="{{item.id}}">设备设置</button>
        <button class="btn btn-remove" bindtap="removeDevice" data-id="{{item.id}}">移除设备</button>
      </view>
    </view>
  </view>

  <!-- 空状态 -->
  <view wx:else class="empty-state">
    <image class="empty-icon" src="/images/empty-device.png" mode="aspectFit"></image>
    <text class="empty-text">暂无绑定设备</text>
    <text class="empty-desc">请通过智能照明APP添加设备</text>
    <button class="btn btn-primary" bindtap="addDevice">添加设备</button>
  </view>

  <!-- 添加设备按钮 -->
  <view wx:if="{{devices.length > 0}}" class="add-device-section">
    <button class="btn btn-add" bindtap="addDevice">+ 添加新设备</button>
  </view>
</scroll-view>