<!-- 个人资料编辑页面 -->
<view class="page">
  <!-- 加载中状态 -->
  <view wx:if="{{loading}}" class="loading-state">
    <view class="loading-spinner"></view>
    <text class="loading-text">加载中...</text>
  </view>

  <view wx:else class="card">
    <!-- 头像区域 -->
    <view class="avatar-section">
      <view class="avatar-wrap" bindtap="chooseAvatar">
        <image class="avatar" src="{{avatarUrl || '/images/个人中心.png'}}" mode="aspectFill"></image>
        <view class="avatar-edit-icon">
          <image class="icon-img" src="/images/加.png" mode="aspectFit"></image>
        </view>
      </view>
      <text class="avatar-tip">点击更换头像</text>
    </view>

    <!-- 昵称 -->
    <view class="field">
      <text class="label">昵称</text>
      <input 
        class="input" 
        placeholder="请输入昵称" 
        value="{{nickname}}" 
        bindinput="onNicknameInput" 
        maxlength="20"
      />
    </view>

    <!-- 手机号 -->
    <view class="field">
      <text class="label">手机号</text>
      <view class="row">
        <text class="phone {{phone ? '' : 'placeholder'}}">{{phone || '未绑定'}}</text>
        <button 
          class="btn ghost small" 
          open-type="getPhoneNumber" 
          bindgetphonenumber="onGetPhoneNumber"
        >
          {{phone ? '更换' : '绑定'}}
        </button>
      </view>
    </view>

    

    <!-- 保存按钮 -->
    <button 
      class="btn primary" 
      loading="{{saving}}" 
      disabled="{{saving}}"
      bindtap="onSave"
    >
      保存修改
    </button>

    <!-- 退出登录 -->
    <button class="btn logout" bindtap="onLogout">退出登录</button>

    <!-- 注销账号 -->
    <view class="danger-zone">
      <text class="danger-title">危险操作</text>
      <button class="btn danger-btn" bindtap="onDeleteAccount">注销账号</button>
      <text class="danger-tip">注销后账号将无法恢复</text>
    </view>
  </view>
</view>
