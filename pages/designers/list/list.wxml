<!-- è®¾è®¡å¸ˆåˆ—è¡¨é¡µ - å‚è€ƒ ai_studio å¸ƒå±€ -->
<view class="container">
  <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
  <view class="header-section">
    <view class="header-row">
      <text class="page-title">å‘ç°è®¾è®¡å¸ˆ</text>
    </view>

    <!-- ç­›é€‰æ ‡ç­¾ - æ¨ªå‘æ»šåŠ¨ -->
    <scroll-view class="filter-tabs-wrapper" scroll-x enable-flex>
      <view
        class="filter-chip {{sortBy === 'rating' ? 'active' : ''}}"
        bindtap="onFilterTap"
        data-filter="rating"
      >
        <text>æ¨èæ’åº</text>
      </view>
      <view
        class="filter-chip {{selectedSpace ? 'active' : ''}}"
        bindtap="toggleSpaceFilter"
      >
        <text>{{selectedSpaceLabel || 'æ“…é•¿é£æ ¼'}}</text>
        <text class="arrow-icon">â–¼</text>
      </view>
      <view
        class="filter-chip {{sortBy === 'experience' ? 'active' : ''}}"
        bindtap="onFilterTap"
        data-filter="experience"
      >
        <text>ä»ä¸šå¹´é™</text>
      </view>
      <view
        class="filter-chip {{sortBy === 'price' ? 'active' : ''}}"
        bindtap="onFilterTap"
        data-filter="price"
      >
        <text>ä»·æ ¼ç­›é€‰</text>
      </view>
    </scroll-view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading-state">
    <view class="spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- è®¾è®¡å¸ˆåˆ—è¡¨ -->
  <view wx:elif="{{designers.length > 0}}" class="designer-list-content">
    <view
      wx:for="{{designers}}"
      wx:key="_id"
      class="designer-card"
      bindtap="onDesignerTap"
      data-id="{{item._id}}"
    >
      <!-- ä½œå“é›†é¢„è§ˆ - ä½¿ç”¨ portfolioImages æ•°ç»„ -->
      <view wx:if="{{item.portfolioImages && item.portfolioImages.length > 1}}" class="portfolio-grid">
        <image
          class="main-image"
          src="{{item.portfolioImages[0]}}"
          mode="aspectFill"
        />
        <view class="side-images">
          <image
            class="side-image"
            src="{{item.portfolioImages[1]}}"
            mode="aspectFill"
          />
          <view class="image-count-box">
            <text>+{{item.portfolioImages.length}}</text>
          </view>
        </view>
      </view>

      <view wx:else class="portfolio-single">
        <image
          class="single-image"
          src="{{item.portfolioImages[0] || item.avatar || '/images/ä¸ªäººä¸­å¿ƒ.png'}}"
          mode="aspectFill"
        />
      </view>

      <!-- è®¾è®¡å¸ˆä¿¡æ¯ -->
      <view class="card-info-section">
        <view class="info-left">
          <image
            class="designer-avatar"
            src="{{item.avatar || '/images/ä¸ªäººä¸­å¿ƒ.png'}}"
            mode="aspectFill"
          />
          <view class="info-text">
            <text class="designer-name">{{item.name}}</text>
            <text class="designer-meta">{{item.experience || 0}}å¹´ç»éªŒ Â· {{item.specialties[0] || 'ç…§æ˜è®¾è®¡'}}</text>
            <view class="badge-group">
              <view wx:if="{{item.hasCalcExp}}" class="badge badge-orange">
                <text>ç…§åº¦è®¤è¯</text>
              </view>
              <view class="badge badge-gray">
                <text>å®åè®¤è¯</text>
              </view>
            </view>
          </view>
        </view>

        <view class="info-right">
          <view class="rating-box">
            <text class="star-icon">â˜…</text>
            <text class="rating-num">{{item.rating || 0}}</text>
          </view>
          <text class="transaction-text">{{item.projects || 0}}å•æˆäº¤</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view wx:else class="empty-state">
    <view class="empty-icon">
      <text class="empty-icon-text">ğŸ”</text>
    </view>
    <text class="empty-title">æœªæ‰¾åˆ°è®¾è®¡å¸ˆ</text>
    <text class="empty-description">è¯·å°è¯•è°ƒæ•´ç­›é€‰æ¡ä»¶</text>
  </view>
</view>
