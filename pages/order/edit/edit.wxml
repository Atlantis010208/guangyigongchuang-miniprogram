<scroll-view class="page" scroll-y>
  <view class="card">
    <text class="title">修改订单</text>
    <view class="row"><text class="label">订单号</text><text class="val">{{order.id}}</text></view>
    <view class="row"><text class="label">状态</text><text class="val">{{order.status}}</text></view>
  </view>

  <view class="card">
    <text class="title">收货信息</text>
    <block wx:if="{{address}}">
      <view class="addr"><text>{{address.name}} {{address.phone}}</text></view>
      <view class="addr"><text>{{addressText || address.full || address.detail}}</text></view>
      <button class="btn ghost" bindtap="onManageAddress">管理地址</button>
    </block>
    <block wx:else>
      <text class="empty">暂无地址</text>
      <button class="btn primary" bindtap="onAddAddress">新增地址</button>
    </block>
  </view>

  <view class="card">
    <text class="title">商品清单</text>
    <view class="item" wx:for="{{items}}" wx:key="id" wx:for-item="product">
      <image class="img" src="{{product.image}}" mode="aspectFill"></image>
      <view class="info">
        <text class="name">{{product.name}}</text>
        <text class="specs" wx:if="{{product.specsText}}">{{product.specsText}}</text>
        <view class="qty-row"><view class="qty-btn" bindtap="dec" data-id="{{product.id}}">-</view><text class="qty-val">{{product.quantity}}</text><view class="qty-btn" bindtap="inc" data-id="{{product.id}}">+</view></view>
      </view>
      <text class="price">¥{{product.subtotal}}</text>
    </view>
  </view>

  <view class="card">
    <view class="sum-row"><text class="label">商品金额</text><text class="val">¥{{subtotal}}</text></view>
    <view class="sum-row strong"><text class="label">合计</text><text class="val">¥{{total}}</text></view>
  </view>

  <view class="footer">
    <button class="btn primary" bindtap="onSave">保存修改</button>
  </view>
  <view class="bottom-spacer"></view>
</scroll-view>


